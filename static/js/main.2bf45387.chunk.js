(this["webpackJsonpimage-editor-react"]=this["webpackJsonpimage-editor-react"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(t,e,n){},,,,,function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(1),i=n.n(c),a=n(5),o=n.n(a),s=(n(17),n(3)),r=n(2),l="ADD_OBJECT",j="REMOVE_OBJECT",d="CLEAR_OBJECTS",h="UPDATE_OBJECT",u="SET_SELECTED_OBJECT",b=function(t){return{type:l,payload:{obj:t}}},v=function(t){return{type:j,payload:{obj:t}}},O=function(t){return{type:h,payload:{obj:t}}},x=function(t){return{type:u,payload:{obj:t}}},g=n(39),f=(n(22),n(0));var p=function(t){var e=t.clickAction,n=t.icon,c=t.tooltip;return Object(f.jsx)("div",{className:"editorButton",onClick:function(t){return e(t)},title:c,children:n})};n(24);var m=function(t){var e=Object(r.b)(),n=Object(c.useState)(),i=Object(s.a)(n,2),a=i[0],o=i[1];return Object(f.jsxs)("div",{className:"ImageUpload",children:[Object(f.jsx)(p,{clickAction:function(t){a.click()},icon:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{d:"M5 8.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5zm9 .5l-2.519 4-2.481-1.96-4 5.96h14l-5-8zm8-4v14h-20v-14h20zm2-2h-24v18h24v-18z"})}),tooltip:"Upload Image"}),Object(f.jsx)("input",{className:"uploadInput",type:"file",ref:function(t){return o(t)},onChange:function(t){return function(t){var n=new Image;n.src=URL.createObjectURL(t.target.files[0]),n.onload=function(){e(b({type:"image",id:Object(g.a)(),url:n.src,xPos:0,yPos:0,width:n.width,height:n.height,isBeingCropped:!1,isBeingDragged:!1,dragStartX:0,dragStartY:0,sizeProportion:n.height/n.width,sx:0,sy:0,sWidth:n.width,sHeight:n.height}))}}(t)}})]})};n(25);var w=function(t){var e=Object(r.b)();return Object(f.jsx)("div",{className:"AddText",children:Object(f.jsx)(p,{clickAction:function(){var t="Hello World";e(b({type:"text",id:Object(g.a)(),text:t,font:"monospace",fontSize:"".concat(50,"px"),xPos:10,yPos:50,width:30*t.length,height:50,isBeingDragged:!1,dragStartX:0,dragStartY:0,color:"#000000"}))},icon:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"24",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{d:"M22 0h-20v6h1.999c0-1.174.397-3 2.001-3h4v16.874c0 1.174-.825 2.126-2 2.126h-1v2h9.999v-2h-.999c-1.174 0-2-.952-2-2.126v-16.874h4c1.649 0 2.02 1.826 2.02 3h1.98v-6z"})}),tooltip:"Insert Text"})})};n(26);var y=function(t){var e=t.contents,n=t.exitAction,c=t.header;return Object(f.jsxs)("div",{className:"SettingsModal",children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("div",{className:"headerTitle",children:c}),Object(f.jsx)("div",{className:"closeModal",onClick:function(){n(!1)},children:"X"})]}),e]})};n(27);var C=function(t){var e=Object(r.b)(),n=Object(c.useState)(!1),i=Object(s.a)(n,2),a=i[0],o=i[1];return Object(f.jsxs)("div",{className:"ClearCanvas",children:[Object(f.jsx)(p,{clickAction:function(){return o(!a)},icon:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{d:"M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"})}),tooltip:"Clear Canvas"}),a?Object(f.jsx)(y,{header:"Delete All",exitAction:o,contents:Object(f.jsxs)("div",{className:"clearCanvasModal",children:[Object(f.jsx)("div",{children:"Are you sure you want to clear the canvas?"}),Object(f.jsxs)("div",{className:"modalButtonWrapper",children:[Object(f.jsx)("div",{className:"cancelButton modalButton",onClick:function(){return o(!1)},children:"Cancel"}),Object(f.jsx)("div",{className:"clearButton modalButton",onClick:function(){return e({type:d,payload:{obj:t}});var t},children:"Clear"})]})]})}):""]})},S=n(7);n(28);var z=function(t){return Object(f.jsx)("div",{className:"VerticalToolbar",children:t.contents.map((function(t,e){return Object(f.jsx)("div",{children:t},e)}))})};var B=function(t){var e=Object(r.c)((function(t){return t.selectedObject})),n=Object(r.b)();return Object(f.jsx)("div",{className:"DeleteItem",children:Object(f.jsx)(p,{clickAction:function(){n(v(e)),n(x(!1))},icon:Object(f.jsx)("svg",{width:"30",height:"24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:Object(f.jsx)("path",{d:"M5.662 23l-5.369-5.365c-.195-.195-.293-.45-.293-.707 0-.256.098-.512.293-.707l14.929-14.928c.195-.194.451-.293.707-.293.255 0 .512.099.707.293l7.071 7.073c.196.195.293.451.293.708 0 .256-.097.511-.293.707l-11.216 11.219h5.514v2h-12.343zm3.657-2l-5.486-5.486-1.419 1.414 4.076 4.072h2.829zm.456-11.429l-4.528 4.528 5.658 5.659 4.527-4.53-5.657-5.657z"})}),tooltip:"Delete ".concat(e.type)})})};var P=function(t){var e=Object(r.c)((function(t){return t.selectedObject})),n=Object(r.b)();return Object(f.jsx)("div",{className:"BringForward",children:Object(f.jsx)(p,{clickAction:function(){e.zIndex+=1,n(O(e))},icon:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{d:"M12 3l12 18h-24z"})}),tooltip:"Bring Forward"})})};var N=function(t){var e=Object(r.c)((function(t){return t.selectedObject})),n=Object(r.b)();return Object(f.jsx)("div",{className:"SendBackward",children:Object(f.jsx)(p,{clickAction:function(){e.zIndex-=1,n(O(e))},icon:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{d:"M12 21l-12-18h24z"})}),tooltip:"Send Backward"})})};n(29);var A=function(t){var e=t.label,n=t.changeAction,i=t.initialVal,a=Object(c.useState)(i),o=Object(s.a)(a,2),r=o[0],l=o[1];return Object(f.jsx)("div",{children:Object(f.jsxs)("label",{children:[Object(f.jsxs)("div",{children:[e,":"]}),Object(f.jsx)("input",{value:r,onChange:function(t){l(t.target.value),n(t)}})]})})};n(30);var D=function(t){var e=Object(r.c)((function(t){return t.selectedObject})),n=Object(c.useState)(!1),i=Object(s.a)(n,2),a=i[0],o=i[1],l=Object(c.useState)(e.color),j=Object(s.a)(l,2),d=j[0],h=j[1],u=Object(r.b)(),b=function(t){e.width=.6*t.fontSize.slice(0,-2)*t.text.length,e.height=Number(e.fontSize.slice(0,-2)),u(O(e))};return Object(f.jsxs)("div",{className:"ChangeTextSettings",children:[Object(f.jsx)(p,{clickAction:function(){o(!a)},icon:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{d:"M24 20v1h-4v-1h.835c.258 0 .405-.178.321-.422l-.473-1.371h-2.231l-.575-1.59h2.295l-1.362-4.077-1.154 3.451-.879-2.498.921-2.493h2.222l3.033 8.516c.111.315.244.484.578.484h.469zm-6-1h1v2h-7v-2h.532c.459 0 .782-.453.633-.887l-.816-2.113h-6.232l-.815 2.113c-.149.434.174.887.633.887h1.065v2h-7v-2h.43c.593 0 1.123-.375 1.32-.935l5.507-15.065h3.952l5.507 15.065c.197.56.69.935 1.284.935zm-10.886-6h4.238l-2.259-6.199-1.979 6.199z"})}),tooltip:"Text Settings"}),a?Object(f.jsx)(y,{exitAction:o,header:"Edit Textbox",contents:Object(f.jsxs)("div",{className:"modalContents",children:[Object(f.jsx)(A,{label:"Text",initialVal:e.text,changeAction:function(t){e.text=t.target.value,b(e)}}),Object(f.jsx)(A,{label:"Size",initialVal:e.fontSize.slice(0,-2),changeAction:function(t){e.fontSize=t.target.value+"px",b(e)}}),Object(f.jsxs)("label",{children:[Object(f.jsx)("div",{children:"Color:"}),Object(f.jsx)("input",{value:d,type:"color",onChange:function(t){h(t.target.value),e.color=t.target.value,u(O(e))}})]})]})}):""]})};n(31);var I=function(t){var e=Object(r.c)((function(t){return t.selectedObject})),n=Object(c.useState)(!1),i=Object(s.a)(n,2),a=i[0],o=i[1],l=Object(c.useState)(!0),j=Object(s.a)(l,2),d=j[0],h=j[1],u=Object(r.b)();return Object(f.jsxs)("div",{className:"ChangeTextSettings",children:[Object(f.jsx)(p,{clickAction:function(){o(!a)},icon:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{d:"M15.562 20.22l-3.562.718.719-3.562 2.843 2.844zm-2.136-3.552l2.844 2.845 7.73-7.73-2.845-2.845-7.729 7.73zm-2.91.332l4.51-4.76-2.026-3.24-2.52 4-2.48-1.96-4 5.96h6.516zm-3.516-8.5c0-.828-.672-1.5-1.5-1.5s-1.5.672-1.5 1.5c0 .829.672 1.5 1.5 1.5s1.5-.671 1.5-1.5zm3.352 10.5h-8.352v-14h18v2.312h2v-4.312h-22v18h9.969l.383-2z"})}),tooltip:"Text Settings"}),a?Object(f.jsx)(y,{exitAction:o,header:"Edit Image",contents:Object(f.jsxs)("div",{className:"modalContents",children:[Object(f.jsx)(A,{label:"Width",initialVal:e.width,changeAction:function(t){e.width=Number(t.target.value),u(O(e)),d&&(e.height=(Number(t.target.value)*e.sizeProportion).toFixed(2))}}),d?"":Object(f.jsx)(A,{label:"Height",initialVal:e.height,changeAction:function(t){e.height=Number(t.target.value).toFixed(2),u(O(e))}}),Object(f.jsxs)("label",{children:[Object(f.jsx)("div",{children:"Scale Proportionally"}),Object(f.jsx)("input",{checked:d,onChange:function(){return h(!d)},type:"checkbox"})]})]})}):""]})};n(32);var k=function(t){var e=Object(r.c)((function(t){return t.selectedObject})),n=Object(r.b)(),i=Object(c.useState)([]),a=Object(s.a)(i,2),o=a[0],l=a[1],j=function(t,c,i,a,o){var s=Object(g.a)();return n(b({type:"handle",id:s,xPos:t,yPos:c,width:i,height:a,handleLocation:o,isBeingDragged:!1,isBeingCropped:!1,parentID:e.id,dragStartX:0,dragStartY:0,color:"#000000",parent:e.id})),s};return Object(f.jsx)("div",{className:"CropImage",children:Object(f.jsx)(p,{clickAction:function(){e.isBeingCropped=!e.isBeingCropped,n(O(e)),e.isBeingCropped?(l([j(e.xPos,e.yPos,30,30,"top"),j(Number(e.width)+Number(e.xPos)-30,Number(e.height)+Number(e.yPos)-30,30,30,"bottom")]),console.log()):(n(v({id:o[0]})),n(v({id:o[1]})))},icon:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{d:"M24 18h-4v-14h-14v-4h-2v4h-4v2h4v14h14v4h2v-4h4v-2zm-18 0v-12h12v12h-12zm2-8.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5-.672 1.5-1.5 1.5-1.5-.672-1.5-1.5zm5.292.5l-1.812 3.833-1.48-1.272-2 3.439h8.292l-3-6z"})}),tooltip:"Crop Image"})})};n(33);var T=function(t){var e=Object(r.c)((function(t){return t.selectedObject}));return Object(f.jsx)("div",{className:"SelectedObjectToolbar",children:Object(f.jsx)(z,{contents:e?[].concat(Object(S.a)(function(t){switch(t){case"text":return[Object(f.jsx)(D,{})];case"image":return[Object(f.jsx)(I,{}),Object(f.jsx)(k,{})];default:return[]}}(e.type)),[Object(f.jsx)(B,{}),Object(f.jsx)(P,{}),Object(f.jsx)(N,{})]):[]})})};n(34);var E=function(t){var e=t.width,n=t.height,i=t.setWidth,a=t.setHeight,o=t.mouseX,r=t.mouseY,l=Object(c.useState)(e),j=Object(s.a)(l,2),d=j[0],h=j[1],u=Object(c.useState)(n),b=Object(s.a)(u,2),v=b[0],O=b[1];return Object(f.jsxs)("div",{className:"CanvasDetails",children:[Object(f.jsxs)("div",{className:"sizeDetailWrapper",children:[Object(f.jsxs)("div",{className:"sizeDetail",children:[Object(f.jsx)("p",{children:"Width:"}),Object(f.jsx)("input",{className:"sizeInput",value:d,onBlur:function(t){i(t.target.value)},onChange:function(t){return h(t.target.value)}})]}),Object(f.jsxs)("div",{className:"sizeDetail",children:[Object(f.jsx)("p",{children:"Height:"}),Object(f.jsx)("input",{className:"sizeInput",value:v,onBlur:function(t){a(t.target.value)},onChange:function(t){return O(t.target.value)}})]})]}),Object(f.jsxs)("p",{children:["X: ",o,", Y: ",r]})]})},M=(n(35),function(t){var e=t.setCanvas,n=Object(r.c)((function(t){return t.canvasObjects})),i=Object(r.c)((function(t){return t.selectedObject})).id,a=Object(r.c)((function(t){return t.selectedObject})),o=Object(c.useState)(800),l=Object(s.a)(o,2),j=l[0],d=l[1],h=Object(c.useState)(600),u=Object(s.a)(h,2),b=u[0],v=u[1],g=Object(c.useState)(0),p=Object(s.a)(g,2),m=p[0],w=p[1],y=Object(c.useState)(0),C=Object(s.a)(y,2),S=C[0],z=C[1],B=Object(r.c)((function(t){return t.canvasObjects})),P=Object(c.useRef)(null),N=Object(r.b)(),A=function(t){n.forEach((function(t){if(!0===t.isBeingDragged){var e=t;e.isBeingDragged=!1,N(O(e)),"handle"===t.type&&t.parentID===i&&k(t)}}))},D=function(t){var e=t.target.getBoundingClientRect();return{x:t.clientX-e.left-t.target.clientLeft,y:t.clientY-e.top-t.target.clientTop}},I=function(t,e){var c=void 0;return n.forEach((function(n){(function(t,e,n){return t>n.xPos&&t<n.xPos+n.width&&e>n.yPos&&e<n.yPos+n.height})(t,e,n)&&(void 0===c||n.zIndex>c.zIndex)&&(c=n)})),c||void 0},k=function(t){if("top"===t.handleLocation){var e=t.xPos,n=t.yPos;console.log(a.xPos),console.log(a.width),a.sx=-(a.xPos-e),a.sy=-(a.yPos-n),a.width-=a.sx,a.height-=a.sy,a.xPos+=a.sx,a.yPos+=a.sy}else if("bottom"===t.handleLocation){var c=t.xPos,i=t.yPos;a.sWidth=a.xPos-c,a.sHeight=a.yPos-i}N(O(a))};return Object(c.useEffect)((function(){var t=P.current;e(t),t.width=j,t.height=b;var n,c=t.getContext("2d"),a={};return function e(){c.clearRect(0,0,t.width,t.height),B.sort((function(t,e){return t.zIndex-e.zIndex})).forEach((function(t){if("image"===t.type)if(a[t.id])c.drawImage(a[t.id],t.sx,t.sy,t.sWidth,t.sHeight,t.xPos,t.yPos,t.width,t.height);else{var e=new Image;e.src=t.url,e.onload=function(){a[t.id]=e,c.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.xPos,t.yPos,t.width,t.height)},e.onerror=function(t){console.log("image failed to load from ".concat(e.src))}}else"text"===t.type?(c.textBaseline="top",c.fillStyle=t.color,c.font="".concat(t.fontSize," ").concat(t.font),c.fillText(t.text,t.xPos,t.yPos)):"handle"===t.type&&(c.fillStyle=t.color,c.fillRect(t.xPos,t.yPos,t.width,t.height));i===t.id&&(c.lineWidth=2,c.strokeStyle="rgb(0, 100, 250)",c.strokeRect(t.xPos,t.yPos,t.width,t.height))})),n=requestAnimationFrame(e)}(),function(){cancelAnimationFrame(n)}}),[B,j,b,i,e]),Object(f.jsxs)("div",{className:"Canvas",children:[Object(f.jsx)("canvas",{ref:P,onMouseDown:function(t){!function(t){var e=D(t),n=e.x,c=e.y,a=I(n,c);void 0===a||a.id!==i&&a.parentID!==i||!1!==a.isBeingCropped&&void 0!==a.isBeingCropped||(a.isBeingDragged=!0,a.dragStartX=a.xPos-n,a.dragStartY=a.yPos-c)}(t)},onMouseLeave:function(t){A()},onMouseUp:function(t){A()},onMouseMove:function(t){!function(t){var e=D(t);w(e.x),z(e.y),n.forEach((function(t){if(!0===t.isBeingDragged){var n=t;n.xPos=e.x+n.dragStartX,n.yPos=e.y+n.dragStartY}}))}(t)},onClick:function(t){!function(t){var e=D(t),n=I(e.x,e.y);void 0!==n?"handle"!==n.type&&(i=n.id,N(x(n))):!0!==a.isBeingCropped&&(i=void 0,N(x(!1)))}(t)}}),Object(f.jsx)(E,{width:j,height:b,setWidth:d,setHeight:v,mouseX:m,mouseY:S})]})});n(36);var L=function(t){Object(r.b)();var e=Object(c.useState)(""),n=Object(s.a)(e,2),i=n[0],a=n[1],o=Object(c.useState)(!1),l=Object(s.a)(o,2),j=l[0],d=l[1],h=Object(c.useState)("Image-".concat(String((new Date).getTime()).slice(8))),u=Object(s.a)(h,2),b=u[0],v=u[1];return Object(f.jsxs)("div",{className:"DownloadAsImage",children:[Object(f.jsx)(p,{clickAction:function(){return d(!j)},icon:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{d:"M12 21l-8-9h6v-12h4v12h6l-8 9zm9-1v2h-18v-2h-2v4h22v-4h-2z"})}),tooltip:"Download Canvas"}),Object(f.jsx)("a",{href:"/",download:b,ref:function(t){return a(t)},className:"hiddenDownloadLink",children:"Download Canvas"}),j?Object(f.jsx)(y,{exitAction:d,header:"Download As Image",contents:Object(f.jsxs)("div",{className:"downloadModal",children:[Object(f.jsx)(A,{label:"Filename",initialVal:b,changeAction:function(t){v(t.target.value)}}),Object(f.jsx)("div",{className:"submitButton",onClick:function(){return function(){var e=t.canvas.toDataURL("image/png");i.href=e,i.click(),d(!1)}()},children:"Download"})]})}):""]})},R=n(8),W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:var n=e.payload.obj;return n.zIndex=t.length,[n].concat(Object(S.a)(t));case h:console.log(e.payload.obj);var c=e.payload.obj;return t.map((function(t){return t.id===c.id?c:t}));case j:var i=e.payload.obj;return t.filter((function(t){return t.id!==i.id}));case d:return[];default:return t}},F=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u:return e.payload.obj;default:return t}},X=Object(R.a)({canvasObjects:W,selectedObject:F}),H=(n(37),Object(R.b)(X));var Y=function(){var t=Object(c.useState)(""),e=Object(s.a)(t,2),n=e[0],i=e[1];return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(r.a,{store:H,children:Object(f.jsxs)("div",{className:"editorContainer",children:[Object(f.jsx)(z,{contents:[Object(f.jsx)(w,{}),Object(f.jsx)(m,{}),Object(f.jsx)(L,{canvas:n}),Object(f.jsx)(C,{})]}),Object(f.jsx)(M,{setCanvas:i}),Object(f.jsx)(T,{})]})})})},V=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),i(t),a(t),o(t)}))};o.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(Y,{})}),document.getElementById("root")),V()}],[[38,1,2]]]);
//# sourceMappingURL=main.2bf45387.chunk.js.map